(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{createPost:()=>i,errorRate:()=>n,getPosts:()=>u,options:()=>p,requestCount:()=>a,setup:()=>c,teardown:()=>l,updatePost:()=>d});const o=require("k6/http"),r=require("k6"),s=require("k6/metrics");var n=new s.Rate("errors"),a=new s.Counter("request_count"),p={scenarios:{scenario_updatePost:{executor:"constant-vus",vus:10,duration:"30s",exec:"updatePost"},scenario_createPost:{executor:"ramping-vus",startVUs:0,stages:[{duration:"30s",target:20},{duration:"1m",target:10}],gracefulRampDown:"30s",exec:"createPost"},scenario_getPosts:{executor:"ramping-vus",startVUs:0,stages:[{duration:"40s",target:30},{duration:"1m20s",target:15}],gracefulRampDown:"30s",exec:"getPosts"}},thresholds:{errors:["rate<0.1"],"http_req_duration{scenario:scenario_1}":["p(95)<1000"],"http_req_duration{scenario:scenario_2}":["p(95)<1000"],"http_req_duration{scenario:scenario_3}":["p(95)<1000"]}};function c(){console.log("Setup phase")}function d(){a.add(1);var e=JSON.stringify({title:"perftestupdate",body:"updating post from k6",userId:"wtw124"}),t=o.put("https://jsonplaceholder.typicode.com/posts/1",e,{headers:{"Content-Type":"application/json"}}),s=(0,r.check)(t,{"update post contains title":function(e){return"perftestupdate"===JSON.parse(e.body).title},"update post contains body":function(e){return"updating post from k6"===JSON.parse(e.body).body},"update post contains userId":function(e){return"wtw124"===JSON.parse(e.body).userId}});n.add(!s),(0,r.sleep)(3)}function i(){a.add(1);var e=JSON.stringify({title:"createperftest",body:"creating post from k6",userId:"wtw123"}),t=o.post("https://jsonplaceholder.typicode.com/posts",e,{headers:{"Content-Type":"application/json"}}),s=(0,r.check)(t,{"create post contains title":function(e){return"createperftest"===JSON.parse(e.body).title},"create post contains body":function(e){return"creating post from k6"===JSON.parse(e.body).body},"create post contains userId":function(e){return"wtw123"===JSON.parse(e.body).userId}});n.add(!s),(0,r.sleep)(3)}function u(){a.add(1);var e=o.get("https://jsonplaceholder.typicode.com/posts"),t=(0,r.check)(e,{"posts contains userId":function(e){return void 0!==JSON.parse(e.body)[0].userId}});n.add(!t);var s=o.get("https://jsonplaceholder.typicode.com/albums/1/photos"),p=(0,r.check)(s,{"photos contains albumId":function(e){return void 0!==JSON.parse(e.body)[0].albumId}});n.add(!p),(0,r.sleep)(3)}function l(){console.log("Teardown phase")}var f=exports;for(var y in t)f[y]=t[y];t.__esModule&&Object.defineProperty(f,"__esModule",{value:!0})})();